<% if current_user.admin? %>
  <% status_text = params[:status].present? ? params[:status].capitalize : 'All' %>
  <% content_for :title, "#{status_text} Orders | Dinner Dash" %>

  <div class="p-4 min-h-screen">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-xl sm:text-2xl font-bold bruno">Orders</h1>

      <%= form_with url: orders_path, method: :get, class: "flex items-center gap-4" do %>
        <%=
          select_tag :status,
                     options_for_select([['All', '']] + @statuses.map { |s| [s.titleize, s] }, params[:status]),
                     class: 'border-gray-300 rounded-lg px-3 py-2 bg-white text-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-500'
        %>
        <%= submit_tag 'Filter', class: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer' %>
      <% end %>
    </div>

    <div class="bg-white rounded-xl overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <%= render partial: 'shared/table_header', collection: order_table_headers %>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <% if @orders.any? %>
            <%= render @orders %>
          <% else %>
            <tr>
              <td colspan="7" class="px-6 text-center text-gray-500">
                <%= render 'shared/fallback', text: 'No Orders found' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <% if @orders.any? %>
        <div class="w-full flex justify-center mt-8 text-sm">
          <%= paginate @orders %>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  <% content_for :title, 'Orders | Dinner Dash' %>
  <%= render 'shared/header', text: 'Your Orders' %>

  <section class="min-h-screen py-8 px-4 sm:px-6">
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
      <% if @orders.any? %>
        <%= render @orders %>
      <% else %>
        <div class="col-span-full">
          <%= render 'shared/fallback', text: 'You have no orders yet.' %>
        </div>
      <% end %>
    </div>
  </section>
<% end %>
