<% content_for :title, "Orders | Dinner Dash" %>

<%= render 'shared/header', text: 'Your Orders' %>

<section class="min-h-screen py-8 px-4 sm:px-6">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
    <% if @orders.any? %>
      <% @orders.each do |order| %>
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow hover:shadow-lg transition-shadow flex flex-col justify-between">
          <div class="mb-4 flex items-center justify-between">
            <h3 class="text-lg font-bold text-gray-900 mb-2">Order #<%= order.id %></h3>
            <span
              class="px-3 py-1 rounded-full text-sm font-semibold
          <%= order.ordered? ? 'bg-yellow-100 text-yellow-800' : '' %>
          <%= order.paid? ? 'bg-green-100 text-green-800' : '' %>
          <%= order.completed? ? 'bg-blue-100 text-blue-800' : '' %>
          <%= order.cancelled? ? 'bg-red-100 text-red-800' : '' %>"
            >
              <%= order.status.capitalize %>
            </span>
          </div>

          <div class="text-gray-700 mb-4 space-y-1">
            <p><span class="font-medium">Total:</span> $<%= order.total_amount %></p>
            <p><span class="font-medium">Items:</span> <%= order.order_items_count %></p>
            <p><span class="font-medium">Placed on:</span> <%= order.created_at.strftime('%b %d, %Y') %></p>
          </div>

          <div class="text-right">
            <%= link_to 'View Details', order_path(order), class: 'text-blue-600 hover:text-blue-800 font-medium' %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="col-span-full">
        <%= render 'shared/fallback', text: 'You have no orders yet.' %>
      </div>
    <% end %>
  </div>
</section>
