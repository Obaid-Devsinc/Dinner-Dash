<% if current_user.admin? %>
  <tr>
    <td class="px-6 py-4"><%= order.id %></td>
    <td class="px-6 py-4"><%= "#{order.first_name} #{order.last_name}" %></td>
    <td class="px-6 py-4"><%= order.email %></td>
    <td class="px-6 py-4 text-[0.8rem]">
      <span
        class="font-semibold
          <%= order.ordered? ? 'text-yellow-800' : '' %>
          <%= order.paid? ? 'text-green-800' : '' %>
          <%= order.completed? ? 'text-blue-800' : '' %>
          <%= order.cancelled? ? 'text-red-800' : '' %>"
      >
        <%= order.status.capitalize %>
      </span>
    </td>
    <td class="px-6 py-4"><%= number_to_currency(order.total_amount, unit: '$') %></td>
    <td class="px-6 py-3"><%= order.created_at.strftime('%Y-%m-%d') %></td>
    <td class="px-6 pt-6 flex gap-3 text-[0.7rem]">
      <%= link_to 'View', order_path(order), class: 'text-blue-600 hover:text-blue-800' %>

      <% if order.ordered? %>
        <%= link_to 'Paid', mark_paid_order_path(order), data: { turbo_method: :patch, turbo_confirm: 'Are you sure?' }, class: 'text-green-700 hover:text-green-900' %>

        <%= link_to 'Cancel', cancel_order_path(order), data: { turbo_method: :patch, turbo_confirm: 'Are you sure?' }, class: 'text-red-700 hover:text-red-900' %>
      <% end %>

      <% if order.paid? %>
        <%= link_to 'Completed', complete_order_path(order), data: { turbo_method: :patch, turbo_confirm: 'Are you sure?' }, class: 'text-blue-700 hover:text-blue-900' %>

        <%= link_to 'Cancel', cancel_order_path(order), data: { turbo_method: :patch, turbo_confirm: 'Are you sure?' }, class: 'text-red-700 hover:text-red-900' %>
      <% end %>
    </td>
  </tr>
<% else %>
  <div class="bg-white border border-gray-200 rounded-lg p-6 shadow hover:shadow-lg transition-shadow flex flex-col justify-between">
    <div class="mb-4 flex items-center justify-between">
      <h3 class="text-lg font-bold text-gray-900 mb-2">Order #<%= order.id %></h3>
      <span
        class="px-3 py-1 rounded-full text-sm font-semibold
          <%= order.ordered? ? 'bg-yellow-100 text-yellow-800' : '' %>
          <%= order.paid? ? 'bg-green-100 text-green-800' : '' %>
          <%= order.completed? ? 'bg-blue-100 text-blue-800' : '' %>
          <%= order.cancelled? ? 'bg-red-100 text-red-800' : '' %>"
      >
        <%= order.status.capitalize %>
      </span>
    </div>

    <div class="text-gray-700 mb-4 space-y-1">
      <p><span class="font-medium">Total:</span> $<%= order.total_amount %></p>
      <p><span class="font-medium">Items:</span> <%= order.order_items_count %></p>
      <p><span class="font-medium">Placed on:</span> <%= order.created_at.strftime('%b %d, %Y') %></p>
    </div>

    <div class="text-right">
      <%= link_to 'View Details', order_path(order), class: 'text-blue-600 hover:text-blue-800 font-medium' %>
    </div>
  </div>
<% end %>
